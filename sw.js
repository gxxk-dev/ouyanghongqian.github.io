const version="offline-cache-v1";self.addEventListener("install",(function(e){e.waitUntil(self.skipWaiting())})),self.addEventListener("activate",(function(e){e.waitUntil(Promise.all([self.clients.claim(),caches.keys().then((function(e){return Promise.all(e.map((function(e){if(e!==version)return caches.delete(e)})))}))]))})),self.addEventListener("fetch",(function(e){console.log("url is",e.request.url),e.respondWith(caches.match(e.request).then((function(n){if(n)return n;var t=e.request.clone();return fetch(t).then((function(n){if(!n||200!==n.status)return n;var t=n.clone();return caches.open(version).then((function(n){n.put(e.request,t)})),n}))})))}));